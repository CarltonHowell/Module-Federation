import{createMemoryHistory as e,Action as t,parsePath as n}from"history";import{createContext as r,useRef as a,useReducer as l,useLayoutEffect as i,createElement as o,useContext as c,useEffect as u,useMemo as p,useCallback as s,Children as h,isValidElement as f,Fragment as d}from"react";function g(e,t){if(!e)throw Error(t)}let m=r({pending:!1,static:!1}),v=r({outlet:null,params:{},pathname:"",route:null});function y(){return S()}function R({children:e=null,action:n=t.Pop,location:r,navigator:a,pending:l=!1,static:i=!1}){return E()&&g(!1),o(m.Provider,{children:e,value:{action:n,location:r,navigator:a,pending:l,static:i}})}function E(){return null!=c(m).location}function $(){return E()||g(!1),c(m).location}function x(){E()||g(!1);let e=c(m),t=e.navigator,n=e.pending,{pathname:r}=c(v),l=a(!1);return u(()=>{l.current=!0}),s((e,a={})=>{l.current&&("number"==typeof e?t.go(e):(e=L(e,r),(a.replace||n?t.replace:t.push)(e,a.state)))},[t,r,n])}function S(){return c(v).outlet}function j(e){let{pathname:t}=c(v);return p(()=>L(e,t),[e,t])}function w(e,t=""){let{pathname:n,params:r}=c(v);t=t?[n,t].join("/").replace(/\/\/+/g,"/"):n;let l=a(),i=$(),u=p(()=>O(e,i,t),[i,e,t]);return u?(l.current!==i&&(l.current=i,u.forEach(({route:e,params:t},n)=>e.preload&&e.preload(t,i,n))),u.reduceRight((e,{params:n,pathname:a,route:l})=>o(v.Provider,{children:l.element,value:{outlet:e,params:{...r,...n},pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:l}}),null)):null}function b(e){return e.map(e=>{let t={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||o(y,null),preload:e.preload};return e.children&&(t.children=b(e.children)),t})}function I(e){let t=[];return h.forEach(e,e=>{if(f(e))if(e.type===d)t.push.apply(t,I(e.props.children));else{var n={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e,preload:e.props.preload};e.props.children&&((e=I(e.props.children)).length&&(n.children=e)),t.push(n)}}),t}function O(e,t,r=""){if("string"==typeof t&&(t=n(t)),t=t.pathname||"/",r){if(r=r.replace(/^\/*/,"/").replace(/\/+$/,""),!t.startsWith(r))return null;t=t===r?"/":t.slice(r.length)}!function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(W)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(P.test(t)?2:""===t?1:10),t)}(t),e),{});!function(e,t){let n=e.slice(0);e.sort((e,r)=>t(e,r)||n.indexOf(e)-n.indexOf(r))}(e,(e,n)=>{let[r,,a]=e;e=t[r];let[l,,i]=n;return e!==(n=t[l])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(a,i)})}(e=function e(t,n=[],r="",a=[],l=[]){return t.forEach((t,i)=>{let o=[r,t.path].join("/").replace(/\/\/+/g,"/"),c=a.concat(t);i=l.concat(i),t.children&&e(t.children,n,o,c,i),n.push([o,c,i])}),n}(e));var a=null;for(r=0;null==a&&r<e.length;++r)e:{a=t;let n=e[r][1],i="/",o={},c=[];for(let e=0;e<n.length;++e){let t=n[e];var l="/"===i?a:a.slice(i.length)||"/";if(!(l=C({path:t.path,caseSensitive:t.caseSensitive,end:e===n.length-1},l))){a=null;break e}i=[i,l.pathname].join("/").replace(/\/\/+/g,"/"),o={...o,...l.params},c.push({route:t,pathname:i,params:o})}a=c}return a}let P=/^:\w+$/,W=e=>"*"===e;function C(e,t){"string"==typeof e&&(e={path:e});let{path:n,caseSensitive:r=!1,end:a=!0}=e,[l,i]=function(e,t,n){let r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(a+="\\/?"),r.push("*"),a+="(.*)"):n&&(a+="\\/?"),n&&(a+="$"),[new RegExp(a,t?void 0:"i"),r]}(n,r,a);if(!(t=t.match(l)))return null;e=t[1];let o=t.slice(2);return t=i.reduce((e,t,n)=>{n=o[n];try{var r=decodeURIComponent(n.replace(/\+/g," "))}catch(a){r=n}return e[t]=r,e},{}),{path:n,pathname:e,params:t}}function L(e,t="/"){let{pathname:r,search:a="",hash:l=""}="string"==typeof e?n(e):e;return{pathname:r?k(r,r.startsWith("/")?"/":t):t,search:a,hash:l}}function k(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function F({children:t,initialEntries:n,initialIndex:r}){let c=a();null==c.current&&(c.current=e({initialEntries:n,initialIndex:r}));let u=c.current,[p,s]=l((e,t)=>t,{action:u.action,location:u.location});return i(()=>u.listen(s),[u]),o(R,{children:t,action:p.action,location:p.location,navigator:u})}function A({to:e,replace:t,state:n}){E()||g(!1);let r=x();return u(()=>{r(e,{replace:t,state:n})}),null}function H({element:e=o(y,null)}){return e}function N({basename:e="",children:t}){return w(t=I(t),e)}function U(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&g(!1),t[n])).replace(/\/*\*$/,()=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function q(e,t=!0){E()||g(!1);let n=c(m).navigator;u(()=>{if(t){var r=n.block(t=>{e({...t,retry(){r(),t.retry()}})});return r}},[n,e,t])}function z(e){E()||g(!1);let t=c(m).navigator;return e=j(e),t.createHref(e)}function B(){return c(m).pending}function D(e){return E()||g(!1),C(e,$().pathname)}function G(){return c(v).params}function J(e,t=""){return E()||g(!1),w(p(()=>b(e),[e]),t)}export{F as MemoryRouter,A as Navigate,y as Outlet,H as Route,R as Router,N as Routes,b as createRoutesFromArray,I as createRoutesFromChildren,U as generatePath,C as matchPath,O as matchRoutes,L as resolveLocation,q as useBlocker,z as useHref,E as useInRouterContext,$ as useLocation,B as useLocationPending,D as useMatch,x as useNavigate,S as useOutlet,G as useParams,j as useResolvedLocation,J as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
